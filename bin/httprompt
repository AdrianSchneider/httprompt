#!/usr/bin/env node
'use strict';

var program = require('commander');
var path    = require('path');
var app     = require('../src/app');

program
  .version('0.0.1')
  .option('-b --baseurl [value]', 'Base URL')
  .option('-p --password [value]', 'Password')
  .option('-P --port', 'Port')
  .option('-v --verbose')
  .option('-H --headers', 'Only include headers')
  .parse(process.argv);

if(!program.baseurl) {
  console.error('No baseurl set; set one with -b');
  process.exit(0);
}

var configFilename = path.resolve(process.env.HOME, './.httprompt.json');
app(configFilename, process.stdin, process.stdout, program.baseurl, function(err, prompt) {
  if (err) {
    console.error(err);
    process.exit(1);
  }

  prompt.start();
});
